{"version":3,"file":"index.js","sources":["../src/services/features.js","../src/helpers/feature-flag.js"],"sourcesContent":["/*eslint-disable no-extra-boolean-cast */\nimport Service from '@ember/service';\nimport { TrackedMap } from 'tracked-built-ins';\n\nexport default class FeaturesService extends Service {\n  _flags = new TrackedMap();\n\n  get flags() {\n    return Array.from(this._flags.keys());\n  }\n\n  setup(flags) {\n    this._resetFlags();\n    for (let flag in flags) {\n      if (Object.prototype.hasOwnProperty.call(flags, flag)) {\n        if (!!flags[flag]) {\n          this.enable(flag);\n        } else {\n          this.disable(flag);\n        }\n      }\n    }\n  }\n\n  enable(flag) {\n    this._flags.set(flag, true);\n  }\n\n  disable(flag) {\n    this._flags.set(flag, false);\n  }\n\n  isEnabled(feature) {\n    let isEnabled = this._featureIsEnabled(feature);\n    if (this._logFeatureFlagMissEnabled() && !isEnabled) {\n      this._logFeatureFlagMiss(feature);\n    }\n    return isEnabled;\n  }\n\n  _resetFlags() {\n    this._flags.clear();\n  }\n\n  _featureIsEnabled(flag) {\n    return this._flags.get(flag) || false;\n  }\n\n  _logFeatureFlagMissEnabled() {\n    return !!this.config.LOG_FEATURE_FLAG_MISS;\n  }\n\n  _logFeatureFlagMiss(feature) {\n    if (console && console.info) {\n      console.info('Feature flag off:', feature);\n    }\n  }\n}\n","import Helper from '@ember/component/helper';\nimport { service } from '@ember/service';\n\nexport default class FeatureFlagHelper extends Helper {\n  @service features;\n\n  compute([flag]) {\n    return this.features.isEnabled(flag);\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAIe,MAAM,eAAe,SAAS,OAAO,CAAC;AACrD,EAAE,MAAM,GAAG,IAAI,UAAU,EAAE;;AAE3B,EAAE,IAAI,KAAK,GAAG;AACd,IAAI,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;AACzC,EAAE;;AAEF,EAAE,KAAK,CAAC,KAAK,EAAE;AACf,IAAI,IAAI,CAAC,WAAW,EAAE;AACtB,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;AAC5B,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE;AAC7D,QAAQ,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;AAC3B,UAAU,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;AAC3B,QAAQ,CAAC,MAAM;AACf,UAAU,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;AAC5B,QAAQ;AACR,MAAM;AACN,IAAI;AACJ,EAAE;;AAEF,EAAE,MAAM,CAAC,IAAI,EAAE;AACf,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC;AAC/B,EAAE;;AAEF,EAAE,OAAO,CAAC,IAAI,EAAE;AAChB,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC;AAChC,EAAE;;AAEF,EAAE,SAAS,CAAC,OAAO,EAAE;AACrB,IAAI,IAAI,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;AACnD,IAAI,IAAI,IAAI,CAAC,0BAA0B,EAAE,IAAI,CAAC,SAAS,EAAE;AACzD,MAAM,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC;AACvC,IAAI;AACJ,IAAI,OAAO,SAAS;AACpB,EAAE;;AAEF,EAAE,WAAW,GAAG;AAChB,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;AACvB,EAAE;;AAEF,EAAE,iBAAiB,CAAC,IAAI,EAAE;AAC1B,IAAI,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,KAAK;AACzC,EAAE;;AAEF,EAAE,0BAA0B,GAAG;AAC/B,IAAI,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,qBAAqB;AAC9C,EAAE;;AAEF,EAAE,mBAAmB,CAAC,OAAO,EAAE;AAC/B,IAAI,IAAI,OAAO,IAAI,OAAO,CAAC,IAAI,EAAE;AACjC,MAAM,OAAO,CAAC,IAAI,CAAC,mBAAmB,EAAE,OAAO,CAAC;AAChD,IAAI;AACJ,EAAE;AACF;;ACtDe,MAAM,iBAAiB,SAAS,MAAM,CAAC;AACtD,EAAE,CAAC,OAAO,CAAC,QAAQ;;AAEnB,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE;AAClB,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC;AACxC,EAAE;AACF;;;;"}